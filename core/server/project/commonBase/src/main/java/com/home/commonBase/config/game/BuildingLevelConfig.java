package com.home.commonBase.config.game;
import com.home.commonBase.config.base.BaseConfig;
import com.home.shine.bytes.BytesReadStream;
import com.home.shine.bytes.BytesWriteStream;
import com.home.shine.data.DIntData;
import com.home.shine.support.collection.LongObjectMap;

/** 建筑等级表(generated by shine) */
public class BuildingLevelConfig extends BaseConfig
{
	/** 存储集合 */
	private static LongObjectMap<BuildingLevelConfig> _dic;
	
	/** id */
	public int id;
	
	/** 消耗ID */
	public int costID;
	
	/** 等级 */
	public int level;
	
	/** 占用角色属性(建筑消失后归还) */
	public DIntData[] useRoleAttributes;
	
	/** 增加功能组(建造好后) */
	public int[][] addActions;
	
	/** 增加角色属性组(建造好后) */
	public DIntData[] addRoleAttributes;
	
	/** 建造时间(ms) */
	public int buildTime;
	
	/** 升级时间(ms) */
	public int levelUpTime;
	
	/** 获取 */
	public static BuildingLevelConfig get(int id,int level)
	{
		return _dic.get((long)id << 16 | (long)level);
	}
	
	/** 设置字典 */
	public static void setDic(LongObjectMap<BuildingLevelConfig> dic)
	{
		_dic=dic;
	}
	
	/** 获取全部 */
	public static LongObjectMap<BuildingLevelConfig> getDic()
	{
		return _dic;
	}
	
	/** 读取字节流(简版) */
	@Override
	protected void toReadBytesSimple(BytesReadStream stream)
	{
		super.toReadBytesSimple(stream);
		
		this.id=stream.readInt();
		
		this.level=stream.readShort();
		
		this.costID=stream.readInt();
		
		int useRoleAttributesLen=stream.readLen();
		if(this.useRoleAttributes==null || this.useRoleAttributes.length!=useRoleAttributesLen)
		{
			this.useRoleAttributes=new DIntData[useRoleAttributesLen];
		}
		DIntData[] useRoleAttributesT=this.useRoleAttributes;
		for(int useRoleAttributesI=0;useRoleAttributesI<useRoleAttributesLen;++useRoleAttributesI)
		{
			DIntData useRoleAttributesV;
			useRoleAttributesV=new DIntData();
			useRoleAttributesV.readBytesSimple(stream);
			
			useRoleAttributesT[useRoleAttributesI]=useRoleAttributesV;
		}
		
		int addRoleAttributesLen=stream.readLen();
		if(this.addRoleAttributes==null || this.addRoleAttributes.length!=addRoleAttributesLen)
		{
			this.addRoleAttributes=new DIntData[addRoleAttributesLen];
		}
		DIntData[] addRoleAttributesT=this.addRoleAttributes;
		for(int addRoleAttributesI=0;addRoleAttributesI<addRoleAttributesLen;++addRoleAttributesI)
		{
			DIntData addRoleAttributesV;
			addRoleAttributesV=new DIntData();
			addRoleAttributesV.readBytesSimple(stream);
			
			addRoleAttributesT[addRoleAttributesI]=addRoleAttributesV;
		}
		
		int addActionsLen=stream.readLen();
		if(this.addActions==null || this.addActions.length!=addActionsLen)
		{
			this.addActions=new int[addActionsLen][];
		}
		int[][] addActionsT=this.addActions;
		for(int addActionsI=0;addActionsI<addActionsLen;++addActionsI)
		{
			int[] addActionsV;
			int addActionsVLen=stream.readLen();
			addActionsV=new int[addActionsVLen];
			int[] addActionsVT=addActionsV;
			for(int addActionsVI=0;addActionsVI<addActionsVLen;++addActionsVI)
			{
				int addActionsVV;
				addActionsVV=stream.readInt();
				
				addActionsVT[addActionsVI]=addActionsVV;
			}
			
			addActionsT[addActionsI]=addActionsV;
		}
		
		this.buildTime=stream.readInt();
		
		this.levelUpTime=stream.readInt();
		
	}
	
	/** 写入字节流(简版) */
	@Override
	protected void toWriteBytesSimple(BytesWriteStream stream)
	{
		super.toWriteBytesSimple(stream);
		
		stream.writeInt(this.id);
		
		stream.writeShort(this.level);
		
		stream.writeInt(this.costID);
		
		if(this.useRoleAttributes!=null)
		{
			DIntData[] useRoleAttributesT=this.useRoleAttributes;
			stream.writeLen(useRoleAttributesT.length);
			for(int useRoleAttributesVI=0,useRoleAttributesVLen=useRoleAttributesT.length;useRoleAttributesVI<useRoleAttributesVLen;++useRoleAttributesVI)
			{
				DIntData useRoleAttributesV=useRoleAttributesT[useRoleAttributesVI];
				if(useRoleAttributesV!=null)
				{
					useRoleAttributesV.writeBytesSimple(stream);
				}
				else
				{
					nullObjError("useRoleAttributesV");
				}
				
			}
		}
		else
		{
			nullObjError("useRoleAttributes");
		}
		
		if(this.addRoleAttributes!=null)
		{
			DIntData[] addRoleAttributesT=this.addRoleAttributes;
			stream.writeLen(addRoleAttributesT.length);
			for(int addRoleAttributesVI=0,addRoleAttributesVLen=addRoleAttributesT.length;addRoleAttributesVI<addRoleAttributesVLen;++addRoleAttributesVI)
			{
				DIntData addRoleAttributesV=addRoleAttributesT[addRoleAttributesVI];
				if(addRoleAttributesV!=null)
				{
					addRoleAttributesV.writeBytesSimple(stream);
				}
				else
				{
					nullObjError("addRoleAttributesV");
				}
				
			}
		}
		else
		{
			nullObjError("addRoleAttributes");
		}
		
		if(this.addActions!=null)
		{
			int[][] addActionsT=this.addActions;
			stream.writeLen(addActionsT.length);
			for(int addActionsVI=0,addActionsVLen=addActionsT.length;addActionsVI<addActionsVLen;++addActionsVI)
			{
				int[] addActionsV=addActionsT[addActionsVI];
				if(addActionsV!=null)
				{
					int[] addActionsVT=addActionsV;
					stream.writeLen(addActionsVT.length);
					for(int addActionsVVI=0,addActionsVVLen=addActionsVT.length;addActionsVVI<addActionsVVLen;++addActionsVVI)
					{
						int addActionsVV=addActionsVT[addActionsVVI];
						stream.writeInt(addActionsVV);
						
					}
				}
				else
				{
					nullObjError("addActionsV");
				}
				
			}
		}
		else
		{
			nullObjError("addActions");
		}
		
		stream.writeInt(this.buildTime);
		
		stream.writeInt(this.levelUpTime);
		
	}
	
	/** 读完所有表后处理 */
	public static void afterReadConfigAll()
	{
		LongObjectMap<BuildingLevelConfig> fDic;
		if(!(fDic=_dic).isEmpty())
		{
			BuildingConfig config;
			
			BuildingLevelConfig[] values;
			BuildingLevelConfig v;
			
			for(int i=(values=fDic.getValues()).length-1;i>=0;--i)
			{
				if((v=values[i])!=null)
				{
					config=BuildingConfig.get(v.id);
					
					if(config.levelMax<v.level)
						config.levelMax=v.level;
				}
			}
		}
		
		
	}
	
}
