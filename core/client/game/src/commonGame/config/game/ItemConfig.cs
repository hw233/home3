using ShineEngine;

/// <summary>
/// 道具表(generated by shine)
/// </summary>
public class ItemConfig:BaseConfig
{
	/** 存储集合 */
	private static IntObjectMap<ItemConfig> _dic;
	
	/// <summary>
	/// 道具id
	/// </summary>
	public int id;
	
	/// <summary>
	/// 名字
	/// </summary>
	public string name;
	
	/// <summary>
	/// 类型
	/// </summary>
	public int type;
	
	/// <summary>
	/// 第二类型
	/// </summary>
	public int secondType;
	
	/// <summary>
	/// 单组叠加上限
	/// </summary>
	public int singlePlusMax;
	
	/// <summary>
	/// 背包容纳上限
	/// </summary>
	public int totalPlusMax;
	
	/// <summary>
	/// 物品等级(基础)
	/// </summary>
	public int itemLevel;
	
	/// <summary>
	/// 使用限制等级
	/// </summary>
	public int limitLevel;
	
	/// <summary>
	/// 使用限制职业组
	/// </summary>
	public int[] limitVocations;
	
	/// <summary>
	/// 是否获得绑定 
	/// </summary>
	public bool bindByGet;
	
	/// <summary>
	/// 是否使用绑定 
	/// </summary>
	public bool bindByUse;
	
	/// <summary>
	/// 是否可交易(拍卖行,面交)
	/// </summary>
	public bool canTrade;
	
	/// <summary>
	/// 是否新获得时出现红点
	/// </summary>
	public bool needRedPoint;
	
	/// <summary>
	/// 整理序
	/// </summary>
	public int sortIndex;
	
	/// <summary>
	/// 出售价格(npc卖店)(基础)
	/// </summary>
	public int sellPrice;
	
	/// <summary>
	/// 掉落物品模型ID
	/// </summary>
	public int fieldItemModelID;
	
	/// <summary>
	/// 图标
	/// </summary>
	public string icon;
	
	/// <summary>
	/// 图标(资源转)
	/// </summary>
	public int iconT;
	
	/// <summary>
	/// 装备是否唯一(equip用)
	/// </summary>
	public bool isUnique;
	
	/// <summary>
	/// 有效时间
	/// </summary>
	public string enableTime;
	
	/// <summary>
	/// 使用条件(equip/tool用)
	/// </summary>
	public int[][] useConditions;
	
	/// <summary>
	/// 说明
	/// </summary>
	public string explain;
	
	/// <summary>
	/// 属性部分(equip用)(基础)
	/// </summary>
	public DIntData[] baseAttributes;
	
	/// <summary>
	/// 装备功能(equip用)
	/// </summary>
	public int[][] equipActions;
	
	/// <summary>
	/// 是否消耗数目(tool用)
	/// </summary>
	public bool useCostItemNum;
	
	/// <summary>
	/// 使用功能(tool用)
	/// </summary>
	public int[][] useActions;
	
	/// <summary>
	/// 交易价格上限
	/// </summary>
	public int tradePriceMax;
	
	/// <summary>
	/// 交易价格下限
	/// </summary>
	public int tradePriceMin;
	
	/// <summary>
	/// 交易默认价格
	/// </summary>
	public int tradeDefaultPrice;
	
	/// <summary>
	/// 是否跳过进包阶段(直接使用,tool用)
	/// </summary>
	public bool passEnterBag;
	
	/// <summary>
	/// 读条ID
	/// </summary>
	public int progressBarID;
	
	/** 名字原值 */
	private string _name;
	
	/** 说明原值 */
	private string _explain;
	
	/// <summary>
	/// 有效时间(时间表达式)
	/// </summary>
	public TimeExpression enableTimeT;
	
	/// <summary>
	/// 获取
	/// </summary>
	public static ItemConfig get(int id)
	{
		return _dic.get(id);
	}
	
	/// <summary>
	/// 设置字典
	/// </summary>
	public static void setDic(IntObjectMap<ItemConfig> dic)
	{
		_dic=dic;
	}
	
	/// <summary>
	/// 添加字典(热更用)
	/// </summary>
	public static void addDic(IntObjectMap<ItemConfig> dic)
	{
		_dic.putAll(dic);
	}
	
	/// <summary>
	/// 获取全部
	/// </summary>
	public static IntObjectMap<ItemConfig> getDic()
	{
		return _dic;
	}
	
	/// <summary>
	/// 读取字节流(简版)
	/// </summary>
	protected override void toReadBytesSimple(BytesReadStream stream)
	{
		base.toReadBytesSimple(stream);
		
		this.id=stream.readInt();
		
		this.name=stream.readUTF();
		
		this.type=stream.readInt();
		
		this.secondType=stream.readInt();
		
		this.singlePlusMax=stream.readInt();
		
		this.totalPlusMax=stream.readInt();
		
		this.itemLevel=stream.readInt();
		
		this.limitLevel=stream.readInt();
		
		int limitVocationsLen=stream.readLen();
		if(this.limitVocations==null || this.limitVocations.Length!=limitVocationsLen)
		{
			this.limitVocations=new int[limitVocationsLen];
		}
		int[] limitVocationsT=this.limitVocations;
		for(int limitVocationsI=0;limitVocationsI<limitVocationsLen;++limitVocationsI)
		{
			int limitVocationsV;
			limitVocationsV=stream.readInt();
			
			limitVocationsT[limitVocationsI]=limitVocationsV;
		}
		
		this.bindByGet=stream.readBoolean();
		
		this.bindByUse=stream.readBoolean();
		
		this.canTrade=stream.readBoolean();
		
		this.sellPrice=stream.readInt();
		
		this.needRedPoint=stream.readBoolean();
		
		this.sortIndex=stream.readInt();
		
		this.icon=stream.readUTF();
		
		this.fieldItemModelID=stream.readInt();
		
		this.explain=stream.readUTF();
		
		this.enableTime=stream.readUTF();
		
		this.isUnique=stream.readBoolean();
		
		int baseAttributesLen=stream.readLen();
		if(this.baseAttributes==null || this.baseAttributes.Length!=baseAttributesLen)
		{
			this.baseAttributes=new DIntData[baseAttributesLen];
		}
		DIntData[] baseAttributesT=this.baseAttributes;
		for(int baseAttributesI=0;baseAttributesI<baseAttributesLen;++baseAttributesI)
		{
			DIntData baseAttributesV;
			baseAttributesV=(DIntData)stream.createData(DIntData.dataID);
			baseAttributesV.readBytesSimple(stream);
			
			baseAttributesT[baseAttributesI]=baseAttributesV;
		}
		
		int equipActionsLen=stream.readLen();
		if(this.equipActions==null || this.equipActions.Length!=equipActionsLen)
		{
			this.equipActions=new int[equipActionsLen][];
		}
		int[][] equipActionsT=this.equipActions;
		for(int equipActionsI=0;equipActionsI<equipActionsLen;++equipActionsI)
		{
			int[] equipActionsV;
			int equipActionsVLen=stream.readLen();
			equipActionsV=new int[equipActionsVLen];
			int[] equipActionsVT=equipActionsV;
			for(int equipActionsVI=0;equipActionsVI<equipActionsVLen;++equipActionsVI)
			{
				int equipActionsVV;
				equipActionsVV=stream.readInt();
				
				equipActionsVT[equipActionsVI]=equipActionsVV;
			}
			
			equipActionsT[equipActionsI]=equipActionsV;
		}
		
		int useConditionsLen=stream.readLen();
		if(this.useConditions==null || this.useConditions.Length!=useConditionsLen)
		{
			this.useConditions=new int[useConditionsLen][];
		}
		int[][] useConditionsT=this.useConditions;
		for(int useConditionsI=0;useConditionsI<useConditionsLen;++useConditionsI)
		{
			int[] useConditionsV;
			int useConditionsVLen=stream.readLen();
			useConditionsV=new int[useConditionsVLen];
			int[] useConditionsVT=useConditionsV;
			for(int useConditionsVI=0;useConditionsVI<useConditionsVLen;++useConditionsVI)
			{
				int useConditionsVV;
				useConditionsVV=stream.readInt();
				
				useConditionsVT[useConditionsVI]=useConditionsVV;
			}
			
			useConditionsT[useConditionsI]=useConditionsV;
		}
		
		int useActionsLen=stream.readLen();
		if(this.useActions==null || this.useActions.Length!=useActionsLen)
		{
			this.useActions=new int[useActionsLen][];
		}
		int[][] useActionsT=this.useActions;
		for(int useActionsI=0;useActionsI<useActionsLen;++useActionsI)
		{
			int[] useActionsV;
			int useActionsVLen=stream.readLen();
			useActionsV=new int[useActionsVLen];
			int[] useActionsVT=useActionsV;
			for(int useActionsVI=0;useActionsVI<useActionsVLen;++useActionsVI)
			{
				int useActionsVV;
				useActionsVV=stream.readInt();
				
				useActionsVT[useActionsVI]=useActionsVV;
			}
			
			useActionsT[useActionsI]=useActionsV;
		}
		
		this.passEnterBag=stream.readBoolean();
		
		this.useCostItemNum=stream.readBoolean();
		
		this.progressBarID=stream.readInt();
		
		this.tradeDefaultPrice=stream.readInt();
		
		this.tradePriceMin=stream.readInt();
		
		this.tradePriceMax=stream.readInt();
		
	}
	
	/// <summary>
	/// 读完所有表后处理
	/// </summary>
	public static void afterReadConfigAll()
	{
		
	}
	
	/// <summary>
	/// 生成刷新配置
	/// </summary>
	protected override void generateRefresh()
	{
		if(_name==null)
			_name=name;
		name=LanguageConfig.getText(_name);
		
		if(_explain==null)
			_explain=explain;
		explain=LanguageConfig.getText(_explain);
		
		enableTimeT=new TimeExpression(enableTime);
		
		iconT=LoadControl.getResourceIDByName(icon);
	}
	
	/// <summary>
	/// 写入字节流(简版)
	/// </summary>
	protected override void toWriteBytesSimple(BytesWriteStream stream)
	{
		base.toWriteBytesSimple(stream);
		
		stream.writeInt(this.id);
		
		stream.writeUTF(this.name);
		
		stream.writeInt(this.type);
		
		stream.writeInt(this.secondType);
		
		stream.writeInt(this.singlePlusMax);
		
		stream.writeInt(this.totalPlusMax);
		
		stream.writeInt(this.itemLevel);
		
		stream.writeInt(this.limitLevel);
		
		if(this.limitVocations!=null)
		{
			int[] limitVocationsT=this.limitVocations;
			stream.writeLen(limitVocationsT.Length);
			for(int limitVocationsVI=0,limitVocationsVLen=limitVocationsT.Length;limitVocationsVI<limitVocationsVLen;++limitVocationsVI)
			{
				int limitVocationsV=limitVocationsT[limitVocationsVI];
				stream.writeInt(limitVocationsV);
				
			}
		}
		else
		{
			nullObjError("limitVocations");
		}
		
		stream.writeBoolean(this.bindByGet);
		
		stream.writeBoolean(this.bindByUse);
		
		stream.writeBoolean(this.canTrade);
		
		stream.writeInt(this.sellPrice);
		
		stream.writeBoolean(this.needRedPoint);
		
		stream.writeInt(this.sortIndex);
		
		stream.writeUTF(this.icon);
		
		stream.writeInt(this.fieldItemModelID);
		
		stream.writeUTF(this.explain);
		
		stream.writeUTF(this.enableTime);
		
		stream.writeBoolean(this.isUnique);
		
		if(this.baseAttributes!=null)
		{
			DIntData[] baseAttributesT=this.baseAttributes;
			stream.writeLen(baseAttributesT.Length);
			for(int baseAttributesVI=0,baseAttributesVLen=baseAttributesT.Length;baseAttributesVI<baseAttributesVLen;++baseAttributesVI)
			{
				DIntData baseAttributesV=baseAttributesT[baseAttributesVI];
				if(baseAttributesV!=null)
				{
					baseAttributesV.writeBytesSimple(stream);
				}
				else
				{
					nullObjError("baseAttributesV");
				}
				
			}
		}
		else
		{
			nullObjError("baseAttributes");
		}
		
		if(this.equipActions!=null)
		{
			int[][] equipActionsT=this.equipActions;
			stream.writeLen(equipActionsT.Length);
			for(int equipActionsVI=0,equipActionsVLen=equipActionsT.Length;equipActionsVI<equipActionsVLen;++equipActionsVI)
			{
				int[] equipActionsV=equipActionsT[equipActionsVI];
				if(equipActionsV!=null)
				{
					int[] equipActionsVT=equipActionsV;
					stream.writeLen(equipActionsVT.Length);
					for(int equipActionsVVI=0,equipActionsVVLen=equipActionsVT.Length;equipActionsVVI<equipActionsVVLen;++equipActionsVVI)
					{
						int equipActionsVV=equipActionsVT[equipActionsVVI];
						stream.writeInt(equipActionsVV);
						
					}
				}
				else
				{
					nullObjError("equipActionsV");
				}
				
			}
		}
		else
		{
			nullObjError("equipActions");
		}
		
		if(this.useConditions!=null)
		{
			int[][] useConditionsT=this.useConditions;
			stream.writeLen(useConditionsT.Length);
			for(int useConditionsVI=0,useConditionsVLen=useConditionsT.Length;useConditionsVI<useConditionsVLen;++useConditionsVI)
			{
				int[] useConditionsV=useConditionsT[useConditionsVI];
				if(useConditionsV!=null)
				{
					int[] useConditionsVT=useConditionsV;
					stream.writeLen(useConditionsVT.Length);
					for(int useConditionsVVI=0,useConditionsVVLen=useConditionsVT.Length;useConditionsVVI<useConditionsVVLen;++useConditionsVVI)
					{
						int useConditionsVV=useConditionsVT[useConditionsVVI];
						stream.writeInt(useConditionsVV);
						
					}
				}
				else
				{
					nullObjError("useConditionsV");
				}
				
			}
		}
		else
		{
			nullObjError("useConditions");
		}
		
		if(this.useActions!=null)
		{
			int[][] useActionsT=this.useActions;
			stream.writeLen(useActionsT.Length);
			for(int useActionsVI=0,useActionsVLen=useActionsT.Length;useActionsVI<useActionsVLen;++useActionsVI)
			{
				int[] useActionsV=useActionsT[useActionsVI];
				if(useActionsV!=null)
				{
					int[] useActionsVT=useActionsV;
					stream.writeLen(useActionsVT.Length);
					for(int useActionsVVI=0,useActionsVVLen=useActionsVT.Length;useActionsVVI<useActionsVVLen;++useActionsVVI)
					{
						int useActionsVV=useActionsVT[useActionsVVI];
						stream.writeInt(useActionsVV);
						
					}
				}
				else
				{
					nullObjError("useActionsV");
				}
				
			}
		}
		else
		{
			nullObjError("useActions");
		}
		
		stream.writeBoolean(this.passEnterBag);
		
		stream.writeBoolean(this.useCostItemNum);
		
		stream.writeInt(this.progressBarID);
		
		stream.writeInt(this.tradeDefaultPrice);
		
		stream.writeInt(this.tradePriceMin);
		
		stream.writeInt(this.tradePriceMax);
		
	}
	
}
