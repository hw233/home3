using ShineEngine;

/// <summary>
/// 登录选择消息(generated by shine)
/// </summary>
public class ClientLoginSelectHttpRequest:LoginHttpRequest
{
	/// <summary>
	/// 数据类型ID
	/// </summary>
	public const int dataID=LoginHttpRequestType.ClientLoginSelect;
	
	/// <summary>
	/// 登录令牌
	/// </summary>
	public int loginToken;
	
	/// <summary>
	/// 选择区服ID
	/// </summary>
	public int areaID=-1;
	
	/// <summary>
	/// 返回值
	/// </summary>
	protected ClientLoginSelectResult _re;
	
	public ClientLoginSelectHttpRequest()
	{
		_dataID=LoginHttpRequestType.ClientLoginSelect;
	}
	
	/// <summary>
	/// 写入字节流(完整版)
	/// </summary>
	protected override void toWriteBytesFull(BytesWriteStream stream)
	{
		base.toWriteBytesFull(stream);
		
		stream.startWriteObj();
		
		stream.writeInt(this.loginToken);
		
		stream.writeInt(this.areaID);
		
		stream.endWriteObj();
	}
	
	/// <summary>
	/// 写入字节流(简版)
	/// </summary>
	protected override void toWriteBytesSimple(BytesWriteStream stream)
	{
		base.toWriteBytesSimple(stream);
		
		stream.writeInt(this.loginToken);
		
		stream.writeInt(this.areaID);
		
	}
	
	/// <summary>
	/// 执行
	/// </summary>
	protected override void toRead()
	{
		_re=new ClientLoginSelectResult();
		readResult(_re,_resultStream);
	}
	
	/// <summary>
	/// 获取结果
	/// </summary>
	public ClientLoginSelectResult getResult()
	{
		return _re;
	}
	
	/// <summary>
	/// 执行
	/// </summary>
	protected override void onComplete()
	{
		if(_result==-1 || _re==null)
		{
			Ctrl.print("ClientLoginHttpRequest失败,errorCode",_result);
			GameC.main.onLoginSelectFailed();
			return;
		}

		GameC.main.onLoginSelectSuccess(_re.info);
	}
	
	/// <summary>
	/// 同步执行
	/// </summary>
	public ClientLoginSelectResult sendMSync()
	{
		doSendSync();
		return _re;
	}
	
	protected override void copyData()
	{
		base.copyData();
	}
	
	/// <summary>
	/// 创建实例
	/// </summary>
	public static ClientLoginSelectHttpRequest create(int loginToken,int areaID)
	{
		ClientLoginSelectHttpRequest re=new ClientLoginSelectHttpRequest();
		re.loginToken=loginToken;
		re.areaID=areaID;
		return re;
	}
	
}
